<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡∏Ñ‡∏¥‡∏ß | Lumina</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body class="menu-bg">
    <div class="container" style="max-width:600px; margin:auto; padding:20px; text-align:center; color:white;">
        <button class="back-btn" onclick="location.href='index.html'" style="margin-bottom: 20px;">‚Üê ‡∏´‡∏ô‡πâ‡∏≤‡∏´‡∏•‡∏±‡∏Å</button>
        <h1 style="margin:0 0 20px; text-shadow: 0 2px 4px rgba(0,0,0,0.3);">üìã ‡∏Ñ‡∏¥‡∏ß‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h1>

        <div style="background:rgba(40, 167, 69, 0.9); padding:20px; border-radius:20px; margin-bottom:20px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
            <h2 style="margin-bottom: 15px; font-size: 1.5rem;">‚úÖ ‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß (‡∏°‡∏≤‡∏£‡∏±‡∏ö‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢)</h2>
            <div id="doneList" style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
                </div>
        </div>

        <div style="background:rgba(255, 193, 7, 0.9); color:#444; padding:20px; border-radius:20px; box-shadow: 0 5px 15px rgba(0,0,0,0.2);">
            <h2 style="margin-bottom: 15px; font-size: 1.5rem;">üî• ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏õ‡∏£‡∏∏‡∏á...</h2>
            <div id="cookingList" style="display:flex; flex-wrap:wrap; gap:10px; justify-content:center;">
                </div>
        </div>
    </div>

    <script>
        // üî¥ ‡πÉ‡∏™‡πà URL ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ (‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÉ‡∏ô js/app.js)
        const SCRIPT_URL = 'https://script.google.com/macros/s/AKfycbym7JvkK8GzTeyZ_By8a0Hh0qupyR0mDbX869jwaBsBHMlM44f_TSaCSvh04RcA-iIR/exec'; 

        function loadQueue() {
            fetch(SCRIPT_URL)
            .then(res => res.json())
            .then(orders => {
                const doneDiv = document.getElementById("doneList");
                const cookDiv = document.getElementById("cookingList");

                // ‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß
                const doneOrders = orders.filter(o => o.status === 'done');
                doneDiv.innerHTML = doneOrders.length ? doneOrders.map(o => 
                    `<div style="background:white; color:#28a745; padding:8px 20px; border-radius:30px; font-weight:bold; font-size:1.2rem; box-shadow:0 2px 5px rgba(0,0,0,0.1);">${o.name} (${o.cls})</div>`
                ).join("") : "<p style='width:100%; opacity:0.8;'>‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£</p>";

                // ‡∏Å‡∏£‡∏≠‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥
                const cookOrders = orders.filter(o => o.status === 'cooking');
                cookDiv.innerHTML = cookOrders.length ? cookOrders.map(o => 
                    `<div style="background:white; color:#e0a800; padding:8px 20px; border-radius:30px; font-weight:bold; font-size:1.1rem; box-shadow:0 2px 5px rgba(0,0,0,0.1);">${o.name} (${o.cls})</div>`
                ).join("") : "<p style='width:100%; opacity:0.8;'>‡∏ß‡πà‡∏≤‡∏á</p>";
            });
        }

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏∏‡∏Å‡πÜ 5 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ (Real-time)
        loadQueue();
        setInterval(loadQueue, 5000); 
    </script>
</body>
</html>